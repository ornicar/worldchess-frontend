<div class="profile-avatar-crop">
  <div class="profile-avatar-crop__header">
    <button class="profile-avatar-crop--btn" (click)="openFileDialog()">
      Upload image
      <svg-upload class="icon"></svg-upload>
    </button>
    <input type="file" #upload accept="image/*" (change)="fileChangeEvent($event)">
    <button class="profile-avatar-crop--btn flex-end" *ngIf="showCropper" (click)="rotateLeft()">
      <svg-rotate-left class="icon"></svg-rotate-left>
    </button>
    <button class="profile-avatar-crop--btn flex-end" *ngIf="showCropper" (click)="rotateRight()">
      <svg-rotate-right class="icon"></svg-rotate-right>
    </button>
    <button class="profile-avatar-crop--btn flex-end" *ngIf="showCropper" (click)="flipHorizontal()">
      <svg-icon-flip class="icon"></svg-icon-flip>
    </button>
    <button class="profile-avatar-crop--btn flex-end" *ngIf="showCropper" (click)="flipVertical()">
      <svg-icon-flip class="icon rotate90"></svg-icon-flip>
    </button>
    <button class="profile-avatar-crop--btn flex-end" (click)="close()">
      <svg-close class="icon"></svg-close>
    </button>
    <button class="profile-avatar-crop--btn flex-end" *ngIf="showCropper" (click)="done()">
      <svg-done class="icon"></svg-done>
    </button>
  </div>
  <div class="profile-avatar-crop__body">
    <image-cropper
      [imageChangedEvent]="imageChangedEvent"
      [maintainAspectRatio]="true"
      [aspectRatio]="4 / 4"
      [resizeToWidth]="128"
      [cropperMinWidth]="128"
      [onlyScaleDown]="true"
      [roundCropper]="true"
      format="png"
      outputType="base64"
      (imageCropped)="imageCropped($event)"
      (imageLoaded)="imageLoaded()"
      (cropperReady)="cropperReady()"
      (loadImageFailed)="loadImageFailed()"
      [style.display]="showCropper ? null : 'none'"
    ></image-cropper>
  </div>
  <div class="profile-avatar-crop__footer" *ngIf="croppedImage">
    <h4>Preview:</h4>
    <img class="profile-avatar-crop--preview" [src]="croppedImage">
  </div>
</div>
